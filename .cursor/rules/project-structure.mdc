---
description: 
globs: 
alwaysApply: true
---
# AutoFish v2.3 é¡¹ç›®ç»“æ„è¯´æ˜

## é¡¹ç›®æ¦‚è¿°
æ™ºèƒ½åŒ–é’“é±¼è¾…åŠ©å·¥å…·v2.3ï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„é‡æ„ï¼Œé›†æˆè®­ç»ƒæ•°æ®é‡‡é›†ã€AIæ¨¡å‹è®­ç»ƒã€è‡ªåŠ¨åŒ–é’“é±¼è„šæœ¬ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ã€‚

## ä¸»ç¨‹åºå…¥å£
- **ä¸»ç¨‹åº**: [main.py](mdc:main.py) - å›¾å½¢åŒ–ä¸»ç•Œé¢ï¼Œæä¾›æ¨¡å—é€‰æ‹©å’Œå¯åŠ¨åŠŸèƒ½

## v2.3 æ¶æ„ç‰¹æ€§

### ğŸ¯ æ•°æ®é‡‡é›†æ¨¡å— (modules/data_collector/) - **MVCæ¶æ„**
- **ä¸»å…¥å£**: [modules/data_collector/main.py](mdc:modules/data_collector/main.py) - æ¨¡å—å¯åŠ¨å…¥å£
- **UIç®¡ç†å™¨**: [modules/data_collector/ui_manager.py](mdc:modules/data_collector/ui_manager.py) - UIç•Œé¢ç®¡ç†å’Œæ˜¾ç¤º
- **ä¸šåŠ¡é€»è¾‘**: [modules/data_collector/business_logic.py](mdc:modules/data_collector/business_logic.py) - æ•°æ®é‡‡é›†å’Œå¤„ç†é€»è¾‘
- **æ•°æ®ç®¡ç†**: [modules/data_collector/data_manager.py](mdc:modules/data_collector/data_manager.py) - æ•°æ®å­˜å‚¨å’Œç®¡ç†
- **å±å¹•æ•è·**: [modules/data_collector/screen_capture.py](mdc:modules/data_collector/screen_capture.py) - æˆªå›¾åŠŸèƒ½å®ç°
- **çƒ­é”®ç›‘å¬**: [modules/data_collector/hotkey_listener.py](mdc:modules/data_collector/hotkey_listener.py) - å…¨å±€çƒ­é”®ç›‘å¬
- **é…ç½®ç®¡ç†**: [modules/data_collector/config_manager.py](mdc:modules/data_collector/config_manager.py) - æ¨¡å—é…ç½®ç®¡ç†
- **ç®¡ç†å‘˜å·¥å…·**: [modules/data_collector/admin_utils.py](mdc:modules/data_collector/admin_utils.py) - ç®¡ç†å‘˜æƒé™å¤„ç†
- **ç³»ç»Ÿè®¾ç½®**: [modules/data_collector/system_settings_dialog.py](mdc:modules/data_collector/system_settings_dialog.py) - ç³»ç»Ÿè®¾ç½®ç•Œé¢
- **çƒ­é”®é…ç½®**: [modules/data_collector/hotkey_config_dialog.py](mdc:modules/data_collector/hotkey_config_dialog.py) - çƒ­é”®é…ç½®ç•Œé¢

### ğŸ§  æ¨¡å‹è®­ç»ƒæ¨¡å— (modules/model_trainer/) - **å®Œæ•´è®­ç»ƒæµç¨‹**
- **ä¸»å…¥å£**: [modules/model_trainer/main.py](mdc:modules/model_trainer/main.py) - æ¨¡å—å¯åŠ¨å…¥å£
- **è®­ç»ƒæµç¨‹**: [modules/model_trainer/training_pipeline.py](mdc:modules/model_trainer/training_pipeline.py) - ç«¯åˆ°ç«¯è®­ç»ƒæµç¨‹
- **è®­ç»ƒç•Œé¢**: [modules/model_trainer/training_ui.py](mdc:modules/model_trainer/training_ui.py) - å›¾å½¢åŒ–è®­ç»ƒç•Œé¢
- **YOLOè®­ç»ƒå™¨**: [modules/model_trainer/yolo_trainer.py](mdc:modules/model_trainer/yolo_trainer.py) - YOLOæ¨¡å‹è®­ç»ƒæ ¸å¿ƒ
- **æ•°æ®å¤„ç†å™¨**: [modules/model_trainer/data_processor.py](mdc:modules/model_trainer/data_processor.py) - åŠ¨æ€æ•°æ®å¤„ç†
- **é…ç½®ç®¡ç†**: [modules/model_trainer/config_manager.py](mdc:modules/model_trainer/config_manager.py) - è®­ç»ƒé…ç½®ç®¡ç†
- **æ¡Œé¢æµ‹è¯•**: [modules/model_trainer/desktop_tester.py](mdc:modules/model_trainer/desktop_tester.py) - æ¨¡å‹æµ‹è¯•å·¥å…·
- **æ¨¡å‹éªŒè¯**: [modules/model_trainer/model_validator.py](mdc:modules/model_trainer/model_validator.py) - æ¨¡å‹éªŒè¯å·¥å…·
- **è®­ç»ƒç›‘æ§**: [modules/model_trainer/training_monitor.py](mdc:modules/model_trainer/training_monitor.py) - è®­ç»ƒè¿›åº¦ç›‘æ§

### ğŸ£ è‡ªåŠ¨é’“é±¼æ¨¡å—
- **è‡ªåŠ¨é’“é±¼**: [modules/auto_fisher.py](mdc:modules/auto_fisher.py) - æ™ºèƒ½é’“é±¼çŠ¶æ€æœº

### ğŸ”§ å…¬å…±æ¨¡å— (modules/)
- **é…ç½®ç®¡ç†**: [modules/config_manager.py](mdc:modules/config_manager.py) - å…¨å±€é…ç½®ç³»ç»Ÿ
- **æ—¥å¿—ç³»ç»Ÿ**: [modules/logger.py](mdc:modules/logger.py) - å½©è‰²æ—¥å¿—å’Œæ»šåŠ¨ç®¡ç†

### ğŸ› ï¸ å·¥å…·ç±»åº“ (utils/)
- **å›¾åƒå¤„ç†**: [utils/image_utils.py](mdc:utils/image_utils.py) - OpenCVå›¾åƒé¢„å¤„ç†
- **OCRè¯†åˆ«**: [utils/ocr_utils.py](mdc:utils/ocr_utils.py) - Tesseractæ–‡å­—è¯†åˆ«
- **çƒ­é”®ç®¡ç†**: [utils/hotkey_utils.py](mdc:utils/hotkey_utils.py) - å…¨å±€çƒ­é”®ç›‘å¬
- **æ–‡ä»¶æ“ä½œ**: [utils/file_utils.py](mdc:utils/file_utils.py) - æ–‡ä»¶å’Œç›®å½•ç®¡ç†

### ğŸ“ æ•°æ®ç®¡ç†ç›®å½• (data/)
- **åŸå§‹æ•°æ®**: [data/raw/images/](mdc:data/raw/images) - åŸå§‹æˆªå›¾æ•°æ®æŒ‰åˆ†ç±»å­˜å‚¨
- **åŸå§‹æ ‡æ³¨**: [data/raw/labels/](mdc:data/raw/labels) - åŸå§‹YOLOæ ‡æ³¨æ–‡ä»¶
- **è®­ç»ƒæ•°æ®**: [data/train/](mdc:data/train) - YOLOè®­ç»ƒé›†
- **éªŒè¯æ•°æ®**: [data/val/](mdc:data/val) - YOLOéªŒè¯é›†
- **å¤„ç†æ•°æ®**: [data/processed/](mdc:data/processed) - ROIå¤„ç†åå›¾åƒ
- **æ–‡æœ¬æ•°æ®åº“**: [data/text_database.yaml](mdc:data/text_database.yaml) - OCRæ–‡æœ¬è®°å½•
- **è®­ç»ƒé…ç½®**: [data/train_config.yaml](mdc:data/train_config.yaml) - åŠ¨æ€ç”Ÿæˆçš„YOLOè®­ç»ƒé…ç½®

### ğŸ¯ æ¨¡å‹æ–‡ä»¶ç›®å½• (model/)
- **é¢„è®­ç»ƒæ¨¡å‹**: [model/yolo11n.pt](mdc:model/yolo11n.pt) - YOLO11åŸºç¡€æ¨¡å‹
- **é¢„è®­ç»ƒæ¨¡å‹**: [model/yolov8n.pt](mdc:model/yolov8n.pt) - YOLOv8åŸºç¡€æ¨¡å‹

### ğŸƒ è®­ç»ƒç»“æœç›®å½• (runs/)
- **è®­ç»ƒç›®å½•**: [runs/fishing_train_*/](mdc:runs/fishing_train_*) - è®­ç»ƒè¿‡ç¨‹æ–‡ä»¶
- **æœ€æ–°æ¨¡å‹**: [runs/fishing_model_latest.pt](mdc:runs/fishing_model_latest.pt) - æœ€æ–°è®­ç»ƒæ¨¡å‹
- **æ—¶é—´æˆ³æ¨¡å‹**: [runs/fishing_model_*.pt](mdc:runs/fishing_model_*.pt) - å¸¦æ—¶é—´æˆ³çš„æ¨¡å‹å‰¯æœ¬

### âš™ï¸ é…ç½®ç³»ç»Ÿ (config/)
- **ä¸»é…ç½®**: [config/config.yaml](mdc:config/config.yaml) - ç³»ç»Ÿå…¨å±€é…ç½®
- **çƒ­é”®é…ç½®**: [config/hotkeys.yaml](mdc:config/hotkeys.yaml) - ç”¨æˆ·è‡ªå®šä¹‰çƒ­é”®
- **OCRé…ç½®**: [config/ocr_config.yaml](mdc:config/ocr_config.yaml) - OCRå‚æ•°é…ç½®

### ğŸ“„ å…¶ä»–ç›®å½•
- **æ—¥å¿—æ–‡ä»¶**: [logs/](mdc:logs) - ç³»ç»Ÿè¿è¡Œæ—¥å¿—ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
- **èµ„æºæ–‡ä»¶**: [assets/](mdc:assets) - å›¾æ ‡å’Œç•Œé¢èµ„æº
- **æµ‹è¯•æ–‡ä»¶**: [tests/](mdc:tests) - å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- **é¡¹ç›®æ–‡æ¡£**: [docs/](mdc:docs) - å®Œæ•´é¡¹ç›®æ–‡æ¡£

## ğŸ—ï¸ å†å²ç‰ˆæœ¬å½’æ¡£ (legacy/)
- **æ—§ç‰ˆè„šæœ¬**: [legacy/scripts/](mdc:legacy/scripts) - v1.xç‰ˆæœ¬åŠŸèƒ½è„šæœ¬
- **æ—§ç‰ˆå·¥å…·**: [legacy/tool/](mdc:legacy/tool) - v1.xç‰ˆæœ¬æˆªå›¾å·¥å…·

## ğŸš€ å¯åŠ¨æ–¹å¼

### ä¸»ç¨‹åºå¯åŠ¨
```bash
# å¯åŠ¨ä¸»ç¨‹åºï¼ˆæ¨èï¼‰
python main.py
```

### ç‹¬ç«‹æ¨¡å—å¯åŠ¨
```bash
# æ•°æ®é‡‡é›†æ¨¡å—
python modules/data_collector/main.py

# æ¨¡å‹è®­ç»ƒæ¨¡å—
python modules/model_trainer/main.py

# å‘½ä»¤è¡Œè®­ç»ƒæ¨¡å¼
python modules/model_trainer/main.py --pipeline
```

## âœ¨ v2.3 æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ æ•°æ®é‡‡é›†æ¨¡å—ç‰¹æ€§
- **MVCæ¶æ„** - æ¸…æ™°çš„ä»£ç ç»“æ„å’ŒèŒè´£åˆ†ç¦»
- **é«˜DPIæ”¯æŒ** - è‡ªé€‚åº”é«˜åˆ†è¾¨ç‡æ˜¾ç¤ºå™¨
- **çƒ­é”®ç³»ç»Ÿ** - å…¨å±€çƒ­é”®ç›‘å¬å’Œé…ç½®
- **ç®¡ç†å‘˜æ¨¡å¼** - è‡ªåŠ¨ç®¡ç†å‘˜æƒé™å¤„ç†
- **æ•°æ®ç®¡ç†** - æ™ºèƒ½æ•°æ®åˆ†ç±»å’Œå­˜å‚¨
- **ROIå¤„ç†** - åŒºåŸŸé€‰æ‹©å’Œå›¾åƒé¢„å¤„ç†
- **OCRé›†æˆ** - æ–‡å­—è¯†åˆ«å’Œæ•°æ®åº“å­˜å‚¨

### ğŸ§  æ¨¡å‹è®­ç»ƒæ¨¡å—ç‰¹æ€§
- **ç«¯åˆ°ç«¯è®­ç»ƒ** - ä»åŸå§‹æ•°æ®åˆ°æ¨¡å‹å®Œæˆçš„å®Œæ•´æµç¨‹
- **åŠ¨æ€ç±»åˆ«æ£€æµ‹** - è‡ªåŠ¨è¯†åˆ«å’Œæ˜ å°„æ•°æ®ç±»åˆ«
- **ä¸“ä¸šè®­ç»ƒç­–ç•¥** - å­¦ä¹ ç‡è°ƒåº¦ã€æ—©åœã€æ··åˆç²¾åº¦
- **å®æ—¶ç›‘æ§** - è®­ç»ƒè¿›åº¦å’Œæ€§èƒ½æŒ‡æ ‡ç›‘æ§
- **æ¨¡å‹ç®¡ç†** - è‡ªåŠ¨ä¸‹è½½ã€ä¿å­˜å’Œç‰ˆæœ¬ç®¡ç†
- **æ¡Œé¢æµ‹è¯•** - ç‹¬ç«‹çš„æ¨¡å‹æµ‹è¯•å·¥å…·
- **é…ç½®çµæ´»** - ä¸°å¯Œçš„è®­ç»ƒå‚æ•°é…ç½®

### ğŸ£ è‡ªåŠ¨é’“é±¼æ¨¡å—ç‰¹æ€§
- **çŠ¶æ€æœºè®¾è®¡** - 11ç§é’“é±¼çŠ¶æ€æ™ºèƒ½è¯†åˆ«
- **æ··åˆåˆ¤æ–­** - å›¾åƒè¯†åˆ«+OCRæ–‡å­—è¯†åˆ«
- **å®æ—¶å“åº”** - æ¯«ç§’çº§çŠ¶æ€æ£€æµ‹å’Œå“åº”
- **å¤–è®¾æ¨¡æ‹Ÿ** - ç²¾ç¡®çš„é¼ æ ‡é”®ç›˜æ“ä½œ

## ğŸ”„ æ¨¡å—é—´åä½œ

### æ•°æ®æµå‘
```
æ•°æ®é‡‡é›† â†’ åŸå§‹æ•°æ®(data/raw/) â†’ è®­ç»ƒæ¨¡å— â†’ è®­ç»ƒæ¨¡å‹(runs/) â†’ è‡ªåŠ¨é’“é±¼
```

### é…ç½®å…±äº«
- å…¨å±€é…ç½®ï¼š`config/config.yaml`
- çƒ­é”®é…ç½®ï¼š`config/hotkeys.yaml`
- æ¨¡å—é…ç½®ï¼šå„æ¨¡å—ç‹¬ç«‹é…ç½®æ–‡ä»¶

### æ—¥å¿—ç»Ÿä¸€
- ç»Ÿä¸€æ—¥å¿—æ ¼å¼å’Œé¢œè‰²æ–¹æ¡ˆ
- è‡ªåŠ¨æ—¥å¿—æ»šåŠ¨å’Œå­˜å‚¨
- æ¨¡å—çº§åˆ«çš„æ—¥å¿—ç®¡ç†

## ğŸ® å¼€å‘æ¨¡å¼

### æ¨¡å—ç‹¬ç«‹æ€§
- æ¯ä¸ªæ¨¡å—å¯ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•
- æ ‡å‡†åŒ–çš„æ¨¡å—å¯åŠ¨æ¥å£
- æ¸…æ™°çš„æ¨¡å—é—´æ¥å£å®šä¹‰

### æµ‹è¯•æ”¯æŒ
- å•å…ƒæµ‹è¯•æ¡†æ¶
- é›†æˆæµ‹è¯•æ”¯æŒ
- æ¨¡å—åŠŸèƒ½éªŒè¯

### æ–‡æ¡£å®Œå–„
- è¯¦ç»†çš„APIæ–‡æ¡£
- ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹
- æ•…éšœæ’é™¤æŒ‡å—

## ğŸ† æŠ€æœ¯äº®ç‚¹

### æ¶æ„è®¾è®¡
- **æ¨¡å—åŒ–** - æ¸…æ™°çš„åŠŸèƒ½æ¨¡å—åˆ’åˆ†
- **å¯æ‰©å±•** - æ˜“äºæ·»åŠ æ–°åŠŸèƒ½å’Œæ¨¡å—
- **å¯ç»´æŠ¤** - è‰¯å¥½çš„ä»£ç ç»“æ„å’Œæ–‡æ¡£
- **å¯æµ‹è¯•** - å®Œæ•´çš„æµ‹è¯•æ¡†æ¶æ”¯æŒ

### æ€§èƒ½ä¼˜åŒ–
- **GPUåŠ é€Ÿ** - CUDAæ”¯æŒå’Œè‡ªåŠ¨è®¾å¤‡æ£€æµ‹
- **å†…å­˜ä¼˜åŒ–** - æ™ºèƒ½å†…å­˜ç®¡ç†å’Œç¼“å­˜ç­–ç•¥
- **å®æ—¶å“åº”** - æ¯«ç§’çº§çš„å“åº”æ—¶é—´
- **å¹¶å‘å¤„ç†** - å¤šçº¿ç¨‹å’Œå¼‚æ­¥å¤„ç†

### ç”¨æˆ·ä½“éªŒ
- **å›¾å½¢ç•Œé¢** - å‹å¥½çš„GUIç•Œé¢
- **é…ç½®çµæ´»** - ä¸°å¯Œçš„é…ç½®é€‰é¡¹
- **çŠ¶æ€ç›‘æ§** - å®æ—¶çŠ¶æ€æ˜¾ç¤ºå’Œåé¦ˆ
- **é”™è¯¯å¤„ç†** - å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

